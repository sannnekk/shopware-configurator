(()=>{"use strict";var t={156:t=>{var e=function(t){var e;return!!t&&"object"==typeof t&&"[object RegExp]"!==(e=Object.prototype.toString.call(t))&&"[object Date]"!==e&&t.$$typeof!==i},i="function"==typeof Symbol&&Symbol.for?Symbol.for("react.element"):60103;function n(t,e){return!1!==e.clone&&e.isMergeableObject(t)?o(Array.isArray(t)?[]:{},t,e):t}function r(t,e,i){return t.concat(e).map(function(t){return n(t,i)})}function s(t){return Object.keys(t).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[])}function a(t,e){try{return e in t}catch(t){return!1}}function o(t,i,l){(l=l||{}).arrayMerge=l.arrayMerge||r,l.isMergeableObject=l.isMergeableObject||e,l.cloneUnlessOtherwiseSpecified=n;var u,c,h=Array.isArray(i);return h!==Array.isArray(t)?n(i,l):h?l.arrayMerge(t,i,l):(c={},(u=l).isMergeableObject(t)&&s(t).forEach(function(e){c[e]=n(t[e],u)}),s(i).forEach(function(e){(!a(t,e)||Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))&&(a(t,e)&&u.isMergeableObject(i[e])?c[e]=(function(t,e){if(!e.customMerge)return o;var i=e.customMerge(t);return"function"==typeof i?i:o})(e,u)(t[e],i[e],u):c[e]=n(i[e],u))}),c)}o.all=function(t,e){if(!Array.isArray(t))throw Error("first argument should be an array");return t.reduce(function(t,i){return o(t,i,e)},{})},t.exports=o}},e={};function i(n){var r=e[n];if(void 0!==r)return r.exports;var s=e[n]={exports:{}};return t[n](s,s.exports,i),s.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var n=i(156),r=i.n(n);class s{static ucFirst(t){return t.charAt(0).toUpperCase()+t.slice(1)}static lcFirst(t){return t.charAt(0).toLowerCase()+t.slice(1)}static toDashCase(t){return t.replace(/([A-Z])/g,"-$1").replace(/^-/,"").toLowerCase()}static toLowerCamelCase(t,e){let i=s.toUpperCamelCase(t,e);return s.lcFirst(i)}static toUpperCamelCase(t,e){return e?t.split(e).map(t=>s.ucFirst(t.toLowerCase())).join(""):s.ucFirst(t.toLowerCase())}static parsePrimitive(t){try{return/^\d+(.|,)\d+$/.test(t)&&(t=t.replace(",",".")),JSON.parse(t)}catch(e){return t.toString()}}}class a{constructor(t=document){this._el=t,t.$emitter=this,this._listeners=[]}publish(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=new CustomEvent(t,{detail:e,cancelable:i});return this.el.dispatchEvent(n),n}subscribe(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=this,r=t.split("."),s=i.scope?e.bind(i.scope):e;if(i.once&&!0===i.once){let e=s;s=function(i){n.unsubscribe(t),e(i)}}return this.el.addEventListener(r[0],s),this.listeners.push({splitEventName:r,opts:i,cb:s}),!0}unsubscribe(t){let e=t.split(".");return this.listeners=this.listeners.reduce((t,i)=>([...i.splitEventName].sort().toString()===e.sort().toString()?this.el.removeEventListener(i.splitEventName[0],i.cb):t.push(i),t),[]),!0}reset(){return this.listeners.forEach(t=>{this.el.removeEventListener(t.splitEventName[0],t.cb)}),this.listeners=[],!0}get el(){return this._el}set el(t){this._el=t}get listeners(){return this._listeners}set listeners(t){this._listeners=t}}class o{constructor(t,e={},i=!1){if(!(t instanceof Node)){console.warn(`There is no valid element given while trying to create a plugin instance for "${i}".`);return}this.el=t,this.$emitter=new a(this.el),this._pluginName=this._getPluginName(i),this.options=this._mergeOptions(e),this._initialized=!1,this._registerInstance(),this._init()}init(){console.warn(`The "init" method for the plugin "${this._pluginName}" is not defined. The plugin will not be initialized.`)}update(){}_init(){this._initialized||(this.init(),this._initialized=!0)}_update(){this._initialized&&this.update()}_mergeOptions(t){let e=[this.constructor.options,this.options,t];return e.push(this._getConfigFromDataAttribute()),e.push(this._getOptionsFromDataAttribute()),r().all(e.filter(t=>t instanceof Object&&!(t instanceof Array)).map(t=>t||{}))}_getConfigFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=s.toDashCase(this._pluginName),i=this.el.getAttribute(`data-${e}-config`);return i?window.PluginConfigManager.get(this._pluginName,i):t}_getOptionsFromDataAttribute(){let t={};if("function"!=typeof this.el.getAttribute)return t;let e=s.toDashCase(this._pluginName),i=this.el.getAttribute(`data-${e}-options`);if(i)try{return JSON.parse(i)}catch(t){console.error(`The data attribute "data-${e}-options" could not be parsed to json: ${t.message}`)}return t}_registerInstance(){window.PluginManager.getPluginInstancesFromElement(this.el).set(this._pluginName,this),window.PluginManager.getPlugin(this._pluginName,!1).get("instances").push(this)}_getPluginName(t){return t||(t=this.constructor.name),t}}var l=function(){return(l=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},u=function(){function t(t,e,i){var n=this;this.endVal=e,this.options=i,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(t){n.startTime||(n.startTime=t);var e=t-n.startTime;n.remaining=n.duration-e,n.useEasing?n.countDown?n.frameVal=n.startVal-n.easingFn(e,0,n.startVal-n.endVal,n.duration):n.frameVal=n.easingFn(e,n.startVal,n.endVal-n.startVal,n.duration):n.frameVal=n.startVal+(n.endVal-n.startVal)*(e/n.duration);var i=n.countDown?n.frameVal<n.endVal:n.frameVal>n.endVal;n.frameVal=i?n.endVal:n.frameVal,n.frameVal=Number(n.frameVal.toFixed(n.options.decimalPlaces)),n.printValue(n.frameVal),e<n.duration?n.rAF=requestAnimationFrame(n.count):null!==n.finalEndVal?n.update(n.finalEndVal):n.options.onCompleteCallback&&n.options.onCompleteCallback()},this.formatNumber=function(t){var e,i,r,s=(Math.abs(t).toFixed(n.options.decimalPlaces)+"").split(".");if(e=s[0],i=s.length>1?n.options.decimal+s[1]:"",n.options.useGrouping){r="";for(var a=3,o=0,l=0,u=e.length;l<u;++l)n.options.useIndianSeparators&&4===l&&(a=2,o=1),0!==l&&o%a==0&&(r=n.options.separator+r),o++,r=e[u-l-1]+r;e=r}return n.options.numerals&&n.options.numerals.length&&(e=e.replace(/[0-9]/g,function(t){return n.options.numerals[+t]}),i=i.replace(/[0-9]/g,function(t){return n.options.numerals[+t]})),(t<0?"-":"")+n.options.prefix+e+i+n.options.suffix},this.easeOutExpo=function(t,e,i,n){return i*(1-Math.pow(2,-10*t/n))*1024/1023+e},this.options=l(l({},this.defaults),i),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el="string"==typeof t?document.getElementById(t):t,e=null==e?this.parse(this.el.innerHTML):e,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(e),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined","undefined"!=typeof window&&this.options.enableScrollSpy&&(this.error?console.error(this.error,t):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return n.handleScroll(n)}),window.onscroll=function(){window.onScrollFns.forEach(function(t){return t()})},this.handleScroll(this)))}return t.prototype.handleScroll=function(t){if(t&&window&&!t.once){var e=window.innerHeight+window.scrollY,i=t.el.getBoundingClientRect(),n=i.top+window.pageYOffset,r=i.top+i.height+window.pageYOffset;r<e&&r>window.scrollY&&t.paused?(t.paused=!1,setTimeout(function(){return t.start()},t.options.scrollSpyDelay),t.options.scrollSpyOnce&&(t.once=!0)):(window.scrollY>r||n>e)&&!t.paused&&t.reset()}},t.prototype.determineDirectionAndSmartEasing=function(){var t=this.finalEndVal?this.finalEndVal:this.endVal;if(this.countDown=this.startVal>t,Math.abs(t-this.startVal)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=t;var e=this.countDown?1:-1;this.endVal=t+e*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=t,this.finalEndVal=null;null!==this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},t.prototype.start=function(t){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),t&&(this.options.onCompleteCallback=t),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},t.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},t.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},t.prototype.update=function(t){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(t),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},t.prototype.printValue=function(t){var e;if(this.el){var i=this.formattingFn(t);(null===(e=this.options.plugin)||void 0===e?void 0:e.render)?this.options.plugin.render(this.el,i):"INPUT"===this.el.tagName?this.el.value=i:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=i:this.el.innerHTML=i}},t.prototype.ensureNumber=function(t){return"number"==typeof t&&!isNaN(t)},t.prototype.validateValue=function(t){var e=Number(t);return this.ensureNumber(e)?e:(this.error="[CountUp] invalid start or end value: ".concat(t),null)},t.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},t.prototype.parse=function(t){var e=function(t){return t.replace(/([.,'Â  ])/g,"\\$1")},i=e(this.options.separator),n=e(this.options.decimal);return parseFloat(t.replace(RegExp(i,"g"),"").replace(RegExp(n,"g"),"."))},t}(),c=window&&window.__assign||function(){return(c=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)},h=window.requestAnimationFrame||function(t){window.setTimeout(t,1e3/60)},d=function(){function t(t){this.version="1.0",this.defaults={duration:.8,lastDigitDelay:.25},this.cell_digits=null,this.options=c(c({},this.defaults),t),this.cell_digits=null}return t.prototype.render=function(t,e){var i=this.options,n=!1;if(!this.cell_digits){if(n=!0,!document.querySelector("style[odometer]")){var r=document.createElement("style");r.setAttribute("odometer","odometer"),r.innerHTML=".odometer-numbers{display:inline-flex;line-height:100%;overflow-y:hidden}.odometer-numbers>span{display:flex;flex-direction:column;justify-content:start;align-items:center;height:1em;will-change:transform;transform:translateY(0)}",document.head.appendChild(r)}t.innerHTML='<div class="odometer-numbers"></div>',this.cell_digits=[]}for(var s='<span style="color:transparent">0</span>',a="transform ".concat(i.duration,"s ease-out"),o=this.cell_digits.length;o<e.length;o++){var l=document.createElement("span");l.style.transition=a,l.innerHTML=n?"":s,t.firstChild&&t.firstChild.appendChild(l),this.cell_digits.push({container:l,current:void 0,position:+!!n,new:!0})}function u(t,e){t.position--,t.container.appendChild(e),t.lastTimeAdd=+new Date,t.new?(t.new=!1,h(function(){t.container.style.transform="translateY(".concat(t.position,"em)")})):t.container.style.transform="translateY(".concat(t.position,"em)")}var c,d,p=Math.max(e.length,this.cell_digits.length),m=this;for(o=0;o<p;o++)(function(){c=o<e.length?e.charAt(o):null;var t,n,r=m.cell_digits[o];r.current!=c&&(r.current=c,(d=document.createElement("span")).innerHTML=null===c?s:c,r.container.children.length<4?u(r,d):(r.nextToAdd&&(u(r,r.nextToAdd),clearTimeout(r.lastTimer),r.nextToAdd=null),t=+new Date,n=1e3*i.lastDigitDelay-(t-r.lastTimeAdd),i.lastDigitDelay<=0||t-r.lastTimeAdd>=1.05*n?(u(r,d),r.nextToAdd=null):(r.nextToAdd=d,r.lastTimer=setTimeout(function(){u(r,r.nextToAdd),r.nextToAdd=null},1e3*i.duration))),clearTimeout(r.timerClean),r.timerClean=setTimeout(function(){r.timerClean=null,r.container.children.length<3||(r.container.style.transition="none",h(function(){for(r.position=-1;r.container.children.length>1;)r.container.removeChild(r.container.firstChild);var t=document.createElement("span");t.innerHTML=s,r.container.insertBefore(t,r.container.firstChild),r.container.style.transform="translateY(".concat(r.position,"em)"),h(function(){r.container.style.transition=a})}))},1e3*((i.duration||.8)+(i.duration||.25))+2500))})()},t}();let{PluginManager:p}=window;p&&p.register("HmnetProductConfigurator",class extends o{init(){this.registerEvents(),this.calculate()}registerEvents(){let t=this;document.querySelector("[data-quantity-selector] input")?.addEventListener("change",t.calculate.bind(t)),document.querySelector("[data-quantity-selector] input")?.addEventListener("input",t.calculate.bind(t)),document.querySelector("[data-quantity-selector] .js-button-minus")?.addEventListener("click",()=>{setTimeout(()=>t.calculate.bind(t),50)}),document.querySelector("[data-quantity-selector] .js-button-plus")?.addEventListener("click",()=>{setTimeout(()=>t.calculate.bind(t),50)}),document.querySelectorAll("[data-hmnet-field-select]").forEach(e=>e.addEventListener("change",t.calculate.bind(t)))}getQuantity(){return parseInt(document.querySelector("[data-quantity-selector] input")?.value)||0}calculate(){this.productPrices=Object.values(JSON.parse(this.el.dataset.productPrices||"{}"))??[],console.log("Product Prices:",this.productPrices),this.taxRate=parseFloat(this.el.dataset.taxRate),this.currencyDecimals=parseInt(this.el.dataset.currencyDecimals)||2,this.currencySymbol=this.el.dataset.currencySymbol||"",this.labelTemplates={setup:this.el.dataset.setupLabelTemplate||"Setup: %option%%possibility%",film:this.el.dataset.filmLabelTemplate||"Film: %option%%possibility%"},this.fieldIds=[...this.el.querySelectorAll("[data-hmnet-field]")].map(t=>t.dataset.fieldId).filter(Boolean);let t=this.getQuantity(),e=0,i=[],n={};for(let r of this.fieldIds){let[s,a,o]=this.getDataForField(r,t),l=t*s;this.setFieldElement(r,s,t,l),i.push(...o),e+=l,e+=o.reduce((t,e)=>t+e.price,0),a&&(n[r]=a)}let r=this.getProductPrice(this.productPrices,t)*t;e+=r;let[s,a]=this.getGrossFromNet(e);this.setProductPriceElements(r,this.productPrices,t),this.setFilmAndSetupOptions(i),this.setChosenOptionsInCartData(n),this.setWholePriceElements(e,s,a)}setFilmAndSetupOptions(t){this.el.querySelector("[data-hmnet-breakdown-list]").innerHTML=t.filter(t=>t.price>0).map(t=>this.getOptionTemplate(t.label,t.price)).join("")}setProductPriceElements(t,e,i){let n=this.getProductPrice(e,i),r=this.el.querySelector("[data-hmnet-product-unit-price]"),s=this.el.querySelector("[data-hmnet-product-quantity]"),a=this.el.querySelector("[data-hmnet-product-total]");this.setNumber(r,n,this.currencyDecimals),this.setNumber(s,i,0,"",""),this.setNumber(a,t,this.currencyDecimals)}getOptionTemplate(t,e){return`<li>
			<span>${t}</span>
			<span>${e.toFixed(this.currencyDecimals)} ${this.currencySymbol}</span>
		</li>`}getDataForField(t,e){let i=[0,null,[],[]],n=document.querySelector(`[data-hmnet-field][data-field-id="${t}"]`);if(!n)return i;let r=n.querySelector("[data-hmnet-field-select]").value,s=parseFloat(n.dataset.setupPrice)||0,a=parseFloat(n.dataset.filmPrice)||0,o=Object.values(JSON.parse(n.dataset.options||"[]"));if(!r)return i;let l=o.find(t=>Object.values(t.possibilities).some(t=>t.id===r)),u=Object.values(l?.possibilities).find(t=>t.id===r);if(!l||!u)return i;let c=l.translated.name||l.name||"",h=u.translated.name||u.name||"",d=u.multiplicator??1;return[this.getUnitPriceForOption(l.priceTiers,d,e),r,[{label:this.getLabelFromTemplate(this.labelTemplates.setup,"Einrichtung",c,h),price:(s??0)*d},{label:this.getLabelFromTemplate(this.labelTemplates.film,"Film",c,h),price:(a??0)*d}]]}getUnitPriceForOption(t,e,i){let n=t.find(t=>t.quantityStart<=i&&t.quantityEnd>=i||null===t.quantityEnd&&t.quantityStart<=i);return n?n.price*e:0}setChosenOptionsInCartData(t){let e=document.querySelector("[data-hmnet-configurator-payload]");e&&(e.value=JSON.stringify({hmnetProductConfigurator:t}))}getGrossFromNet(t){let e=parseFloat((t*(1+this.taxRate/100)).toFixed(this.currencyDecimals));return[e,e-t]}getProductPrice(t,e){let i=t.find(t=>t.quantityStart<=e&&(null===t.quantityEnd||t.quantityEnd>=e));return i?i.price:0}setWholePriceElements(t,e,i){let n=document.querySelector("[data-hmnet-product-configurator-total-net]"),r=document.querySelector("[data-hmnet-product-configurator-total-gross]"),s=document.querySelector("[data-hmnet-product-configurator-total-tax]");this.setNumber(n,t,this.currencyDecimals),this.setNumber(r,e,this.currencyDecimals),this.setNumber(s,i,this.currencyDecimals)}setFieldElement(t,e,i,n){let r=document.querySelector(`[data-hmnet-field][data-field-id="${t}"]`);if(!r)return;let s=r.querySelector("[data-hmnet-field-unit-price]"),a=r.querySelector("[data-hmnet-field-amount]"),o=r.querySelector("[data-hmnet-field-unit-total]");this.setNumber(s,e,this.currencyDecimals),this.setNumber(a,i,0,"",""),this.setNumber(o,n,this.currencyDecimals)}setNumber(t,e){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:",",s=parseFloat(t.dataset.counterPrevValue||"0");new u(t,e,{plugin:new d({duration:.8,lastDigitDelay:0}),startVal:s,duration:.8,decimalPlaces:i,separator:n,decimal:r}).start(),t.dataset.counterPrevValue=e}getLabelFromTemplate(t,e,i,n){let r=n?` ${n}`:"";return(t||`${e}: %option%%possibility%`).replace(/%option%/g,i||"").replace(/%possibility%/g,r).replace(/\s+/g," ").trim()}constructor(...t){super(...t),this.currencyDecimals=2,this.taxRate=19,this.fieldIds=[],this.labelTemplates={setup:"",film:""}}},"[data-hmnet-product-configurator]")})();